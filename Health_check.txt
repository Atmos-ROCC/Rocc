version=$(grep '="version' /etc/maui/nodeconfig.xml | sed "s/.*value=\"\(.*\)\"\/>/\1/g"); hotfixes=$(cat /etc/maui/nodeconfig.xml | awk -F "." '/hotfix/ {print$5,$10,$15,$20,$25,$30,$35}'); state=$(tail -1 /var/log/maui/node_state.log | awk '{print$NF}'); mds_down=$((service mauiremoterep status; service mauimds status) | grep -v running | grep -c mds); xfs=$(egrep -iq 'xfs_repair | xfs_log_force | ioerror | I/O | Corruption | error | page discard | node' /var/log/messages; [[ $? == 0 ]] && echo Yes || echo No); services=$((service apache2 status; service mauiss status; service mauijs status; service mauifs status; service mauicc status) | grep -v running; if [ $? == 0 ]; then echo Yes; else echo No; fi); echo -e "===============================\n|HOSTNAME:  $HOSTNAME\n|IP      :  $(hostname -i)\n|VERSION :  $version\n|HOTFIXES:  $hotfixes\n===============================\n|Runlevel:  $(who -r | awk '{print$2}')\n|Mode    :  $(mmutil.py -g -t MODE)\n|State   :  $state\n|uptime  :  $(uptime | awk '{print$3,$4}')\n===============================\n|Mounted Disks \n|ss      :  $(df -h | grep -c mauiss) \n|MDS     :  $(df -h | grep -c atmos)\n|Capacity:  $(df -h | grep mauipfs | awk '{print$5}')\n===============================\n|CPU use : $(top -n 1 | awk -F ":|%" '/Cpu/ {print$2}')%\n|MEM use :  $(top -n 1 | awk '/Mem/ {print$5,"Used",$7,"Free"}')\n===============================\n|Down/Uninitialized MDS\n|$mds_down\n===============================\n|ISSUES\n|XFS     :  $xfs\n|Services:  $services\n==============================="